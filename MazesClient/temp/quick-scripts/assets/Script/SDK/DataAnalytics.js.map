{"version":3,"sources":["DataAnalytics.js"],"names":["dataAnalytics","appID","appSecret","channel","version","init","cocosAnalytics","login","userID","type","age","sex","CAAccount","loginStart","loginSuccess","setAccountType","setAge","setGender","logout","createAPart","partData","gameServer","cc","sys","platform","createRole","setLevel","payBegin","payDetail","payTime","Date","now","toString","CAPayment","paySuccess","levelBegin","levelDetail","CALevels","begin","levelResult","isPass","console","log","complete","failed","gameHideAndShow","isHide","onPause","onResume","doEvent","detail","CAEvent","onEvent","eventName","dealItem","itemDetail","CAItem","buy","get","consume","module","exports"],"mappings":"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","file":"DataAnalytics.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\SDK","sourcesContent":["const dataAnalytics = {};\r\nconst appID = \"667186214\";\r\nconst appSecret = \"e35b637799d320039441e084601e7867\";\r\nconst channel = 'facebook';\r\nconst version = '1.1.0';\r\n\r\ndataAnalytics.init = function () {\r\n    cocosAnalytics.init({\r\n        // 申请的APPID，必填\r\n        appID: appID,\r\n        appSecret: appSecret,\r\n        // 渠道来源，区分用户渠道，渠道编号参考 http://dq.qudao.info/。\r\n        channel: channel,\r\n        version: version\r\n    })\r\n};\r\n\r\n//登录\r\ndataAnalytics.login = function (userID, type = \"0\", age = 1, sex = 1) {\r\n    //ANALYTICS: login\r\n    cocosAnalytics.CAAccount.loginStart();\r\n    cocosAnalytics.CAAccount.loginSuccess({ 'userID': userID });\r\n    // 设置帐号类型\r\n    cocosAnalytics.CAAccount.setAccountType(type);\r\n    // 年龄\r\n    cocosAnalytics.CAAccount.setAge(age);\r\n    // 性别：1为男，2为女，其它表示未知\r\n    cocosAnalytics.CAAccount.setGender(sex);\r\n};\r\n\r\n//退出\r\ndataAnalytics.logout = function (userID) {\r\n    cocosAnalytics.CAAccount.logout({ 'userID': userID })\r\n};\r\n\r\n//创建角色\r\ndataAnalytics.createAPart = function (partData) {//partData = {data1:\"\",data2:1}\r\n    partData.gameServer = 'platform' + cc.sys.platform;\r\n    //ANALYTICS: createRole\r\n    cocosAnalytics.CAAccount.createRole(partData);\r\n    //等级\r\n    cocosAnalytics.CAAccount.setLevel(1);\r\n};\r\n\r\n//支付开始\r\ndataAnalytics.payBegin = function (payDetail) {\r\n    //ANALYTICS\r\n    let payTime = Date.now().toString();\r\n    payDetail.payTime = payTime;\r\n    cocosAnalytics.CAPayment.payBegin(payDetail);\r\n    /* payDetail ={\r\n        // amount 付费金额，单位为分，必填\r\n        amount: 1,\r\n        // currencyType 货币类型，可选。默认CNY\r\n        currencyType: 'CNY',\r\n        // payType 支付方式，可选。默认为空\r\n        payType: '信用卡',\r\n        // iapID 付费点，可选。默认为空\r\n        iapID: '原地满血复活',\r\n        // orderID 订单编号，可选。默认为空\r\n        orderID: orderID\r\n    } */\r\n};\r\n\r\n//支付成功\r\ndataAnalytics.paySuccess = function (payDetail) {\r\n    //ANALYTICS\r\n    let payTime = Date.now().toString();\r\n    payDetail.payTime = payTime;\r\n    cocosAnalytics.CAPayment.paySuccess(payDetail);\r\n    /* payDetail = {\r\n        // amount 付费金额，单位为分，必填\r\n        amount: 1,\r\n        // currencyType 货币类型，可选。默认CNY\r\n        currencyType: 'CNY',\r\n        // payType 支付方式，可选。默认为空\r\n        payType: '信用卡',\r\n        // iapID 付费点，可选。默认为空\r\n        iapID: '原地满血复活',\r\n        // orderID 订单编号，可选。默认为空\r\n        orderID: orderID\r\n    } */\r\n};\r\n\r\n//关卡开始\r\ndataAnalytics.levelBegin = function (levelDetail) {\r\n    cocosAnalytics.CALevels.begin(levelDetail);\r\n    /*levelDetail = {\r\n        level :  idx\r\n    } */\r\n};\r\n\r\n//关卡结果\r\ndataAnalytics.levelResult = function (isPass, levelDetail) {\r\n    console.log(levelDetail)\r\n    if (isPass) {\r\n        cocosAnalytics.CALevels.complete(levelDetail);\r\n    } else {\r\n        cocosAnalytics.CALevels.failed(levelDetail);\r\n    }\r\n    /*levelDetail = {\r\n        level :  \"\" + idx\r\n        reason : \"主角死亡\"\r\n    } */\r\n};\r\n\r\n//玩家后台运行\r\ndataAnalytics.gameHideAndShow = function (isHide) {\r\n    if (isHide) {\r\n        cocosAnalytics.onPause(true)\r\n    } else {\r\n        cocosAnalytics.onResume(true)\r\n    }\r\n};\r\n\r\n//玩家触发事件\r\ndataAnalytics.doEvent = function (detail) {\r\n    cocosAnalytics.CAEvent.onEvent({\r\n        eventName: detail,\r\n    })\r\n};\r\n\r\n//玩家道具处理\r\ndataAnalytics.dealItem = function (type, itemDetail) {\r\n    if (type == 0) {\r\n        // 购买道具\r\n        cocosAnalytics.CAItem.buy(itemDetail)\r\n        /* {\r\n            itemID: \"魔法瓶\",\r\n            itemType: \"蓝药\",\r\n            itemCount:    //购买数量,int 数字,\r\n            VirtualCoin: 消耗虚拟币数量，int 数字,\r\n            VirtualType: 虚拟币类型，字符串，\"钻石\"、\"金币\"\r\n            consumePoint : 消耗点，字符串\r\n        } */\r\n    } else if (type == 1) {\r\n        // 获得道具\r\n        cocosAnalytics.CAItem.get(itemDetail)\r\n        /* {\r\n            itemID: \"魔法瓶\",\r\n            itemType: \"蓝药\",\r\n            itemCount: 购买数量，int 数字,\r\n            reason: 获得原因，字符串\r\n        } */\r\n    } else if (type == 2) {\r\n        // 消耗道具\r\n        cocosAnalytics.CAItem.consume(itemDetail)\r\n        /* {\r\n            itemID: \"魔法瓶\",\r\n            itemType: \"蓝药\",\r\n            itemCount: 购买数量，int 数字,\r\n            reason: 消耗原因，字符串\r\n        } */\r\n    }\r\n\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\nmodule.exports = dataAnalytics;"]}