{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\UI\\Game/assets\\Script\\UI\\Game\\Tower.js"],"names":["HexCell","require","cc","Class","extends","Component","properties","bubble","default","type","Node","bubbleAxialCoordinate","v2","visible","_axialCoordinate","axialCoordinate","get","set","val","x","y","isShooting","direction","Integer","f","s","delay","size","Size","scaleX","scaleY","onEnable","schedule","check","onDisable","unschedule","init","config","active","node","setContentSize","setScale","setScaleXY","gameView","myRole","rPosition","getPosition","bPosition","getUIPosition","parent","pDistance","levelDetail","level","mid","lid","reason","gameApplication","DataAnalytics","levelResult","die","myNode","targetNode","naturePos","convertToWorldSpaceAR","targetPos","convertToNodeSpaceAR","onLoad","start"],"mappings":"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","file":"Tower.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\UI\\Game","sourcesContent":["var HexCell = require(\"./HexCell\");\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        bubble: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        bubbleAxialCoordinate: {\r\n            default: cc.v2(0, 0),\r\n            visible: false,\r\n        },\r\n        _axialCoordinate: {\r\n            default: cc.v2(0, 0),\r\n            visible: false,\r\n        },\r\n        axialCoordinate: {\r\n            get() {\r\n                return this._axialCoordinate;\r\n            },\r\n            set(val) {\r\n                this._axialCoordinate = cc.v2(val.x, val.y);\r\n                this.bubbleAxialCoordinate = cc.v2(val.x, val.y);\r\n            },\r\n        },\r\n        isShooting: false,\r\n        direction: {\r\n            default: -1,\r\n            type: cc.Integer,\r\n            visible: false,\r\n        },\r\n        f: {\r\n            default: 0,\r\n            type: cc.Integer,\r\n            visible: false,\r\n        },\r\n        s: {\r\n            default: 0,\r\n            type: cc.Integer,\r\n            visible: false,\r\n        },\r\n        delay: {\r\n            default: 0,\r\n            type: cc.Integer,\r\n            visible: false,\r\n        },\r\n        size: {\r\n            default: cc.size(0, 0),\r\n            type: cc.Size,\r\n            visible: false,\r\n        },\r\n        scaleX: {\r\n            default: 1,\r\n            type: cc.Integer,\r\n            visible: false,\r\n        },\r\n        scaleY: {\r\n            default: 1,\r\n            type: cc.Integer,\r\n            visible: false,\r\n        },\r\n\r\n    },\r\n\r\n    onEnable() {\r\n        this.schedule(this.check, 0.1);\r\n    },\r\n    onDisable() {\r\n        this.unschedule(this.check);\r\n    },\r\n\r\n    init(config) {\r\n        this.direction = config.direction;\r\n        this.f = config.f;\r\n        this.s = config.s;\r\n        this.delay = config.delay;\r\n        this.isShooting = false;\r\n        this.bubble.active = false;\r\n        this.node.setContentSize(this.size);\r\n        // cc.log(\"this.scaleX,this.scaleY:\",this.scaleX,this.scaleY)\r\n        this.bubble.setScale(this.scaleX, this.scaleY);\r\n    },\r\n\r\n    setScaleXY(x, y) {\r\n        this.size = cc.size(34 * x, 51 * y);\r\n        this.scaleX = x;\r\n        this.scaleY = y;\r\n    },\r\n\r\n    check() {\r\n        if (gameView.myRole != null) {\r\n            var rPosition = gameView.myRole.node.getPosition();\r\n            var bPosition = this.getUIPosition(this.bubble, gameView.myRole.node.parent);\r\n            if (this.bubble.active && cc.pDistance(rPosition, bPosition) <= 20) {\r\n                this.unschedule(this.check);\r\n\r\n                var levelDetail = {};\r\n                levelDetail.level = mid + \"0\" + (lid > 99 ? lid : (lid > 9 ? \"0\" + lid : \"00\" + lid));\r\n                levelDetail.reason = \"被飞镖撞死\"\r\n                gameApplication.DataAnalytics.levelResult(false, levelDetail);\r\n\r\n                gameView.die();\r\n            }\r\n        }\r\n    },\r\n\r\n    getUIPosition(myNode, targetNode) {\r\n        var naturePos = myNode.parent.convertToWorldSpaceAR(myNode.getPosition());\r\n        var targetPos = targetNode.convertToNodeSpaceAR(naturePos);\r\n        return targetPos;\r\n    },\r\n\r\n    onLoad: function () {\r\n    },\r\n\r\n    start() {\r\n\r\n    },\r\n\r\n});\r\n"]}